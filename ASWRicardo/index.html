#!/bin/bash
yum update -y
yum install -y httpd

# Inicia o Apache
systemctl start httpd
systemctl enable httpd

cat <<EOF > /var/www/html/index.html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>LaboratÃ³rio AWS - Servidor Web</title>
  <style>
    body {
      background: linear-gradient(to right, #1e3c72, #2a5298);
      color: white;
      font-family: "Segoe UI", Tahoma, sans-serif;
      padding: 40px;
      text-align: center;
    }
    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    h2 {
      color: #ffd700;
    }
    section {
      background-color: rgba(0,0,0,0.2);
      margin: 20px auto;
      padding: 20px;
      border-radius: 12px;
      max-width: 800px;
      box-shadow: 0 0 12px rgba(0,0,0,0.3);
    }
    p {
      font-size: 1.1em;
      line-height: 1.6em;
    }
    .emoji {
      font-size: 1.4em;
    }
  </style>
</head>
<body>
  <h1>ğŸ“ LaboratÃ³rio AWS - Infraestrutura Manual via Console</h1>
  <p>Essa aplicaÃ§Ã£o estÃ¡ rodando em uma instÃ¢ncia EC2 criada manualmente pela interface da AWS.</p>

  <section>
    <h2 class="emoji">ğŸŒ Etapa 1: Criar uma VPC</h2>
    <p>Na aba de <strong>VPC</strong>, criamos uma VPC personalizada com o bloco <code>10.0.0.0/16</code> e DNS habilitado.</p>
  </section>

  <section>
    <h2 class="emoji">ğŸ“¦ Etapa 2: Sub-rede PÃºblica</h2>
    <p>Na mesma VPC, adicionamos uma sub-rede pÃºblica (<code>10.0.1.0/24</code>) e ativamos a opÃ§Ã£o <strong>Map public IP on launch</strong>.</p>
  </section>

  <section>
    <h2 class="emoji">ğŸ›£ï¸ Etapa 3: Internet Gateway e Rota</h2>
    <p>Criamos um Internet Gateway, associamos Ã  VPC e configuramos a tabela de rotas para permitir acesso Ã  internet (0.0.0.0/0).</p>
  </section>

  <section>
    <h2 class="emoji">ğŸ›¡ï¸ Etapa 4: Security Group</h2>
    <p>O grupo de seguranÃ§a permite trÃ¡fego nas portas <strong>22 (SSH)</strong> e <strong>80 (HTTP)</strong> de qualquer origem (<code>0.0.0.0/0</code>).</p>
  </section>

  <section>
    <h2 class="emoji">ğŸ’» Etapa 5: EC2 PÃºblica</h2>
    <p>Na aba EC2, lanÃ§amos uma instÃ¢ncia Amazon Linux 2 (t2.micro), selecionamos a sub-rede pÃºblica e colamos este script de inicializaÃ§Ã£o (user data).</p>
  </section>

  <section>
    <h2 class="emoji">ğŸ“ Etapa 6: (Opcional) S3 para Backups</h2>
    <p>VocÃª pode criar um bucket no Amazon S3 para armazenar backups ou arquivos da instÃ¢ncia EC2.</p>
  </section>

  <section>
    <h2 class="emoji">ğŸ“š Objetivo do LaboratÃ³rio</h2>
    <p>Este lab ensina como construir uma infraestrutura bÃ¡sica na AWS do zero, entendendo cada etapa da rede atÃ© a aplicaÃ§Ã£o web em execuÃ§Ã£o.</p>
  </section>

  <p style="margin-top: 40px;">ğŸ”§ Criado via Console AWS | Script automatiza o Apache + HTML ğŸ’»</p>
</body>
</html>
EOF